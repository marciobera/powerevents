"use strict";angular.module("eventsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angularMoment","angularUtils.directives.dirPagination","slickCarousel"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl",controllerAs:"contact"}).otherwise({redirectTo:"/"})}]),angular.module("eventsApp").controller("MainCtrl",["$http","$sce","$location","$rootScope","$cacheFactory","$cookies","$scope","$timeout",function(a,b,c,d,e,f,g,h){var i=this;i.loading=!1,i.slickLoaded=!1,i.cookies=f,i.lastArtists=[];var j=e("myCache");i.artist={name:""},i.currentController=null,d.$on("$routeChangeStart",function(a,b){i.currentController=b.$$route.controllerAs});var k="https://rest.bandsintown.com/artists/",l={params:{app_id:"vanhack_challange"},cache:j};i.slickConfig={mobileFirst:!0,slidesToShow:3,slidesToScroll:3,prevArrow:"<button class='btn btn-default slick-prev'>&lsaquo;</button>",nextArrow:"<button class='btn btn-default slick-next'>&rsaquo;</button>",infinite:!1,method:{}},i.clearSearch=function(a){i._lastArtists(),a&&(i.artist.name=""),i.artist={name:i.artist.name,content:[],events:[],error:{code:0,type:"",message:""}}},i.getArtist=function(){if(i.loading=!0,i.clearSearch(0),!i.artist.name)return i.clearSearch(1),h(function(){i.loading=!1}),!1;var b=f.getObject(i.artist.name);return b?(i._getInputCache(b),i.artist.content=b,i.artist.content.facebook_iframe_url=i._getFacebookPageUrl(i.artist.content.facebook_page_url),h(function(){i.loading=!1}),!1):void a.get(k+i.artist.name,l).then(function(a){i._getInputCache(a.data),i.artist.content=a.data,i.artist.content.facebook_iframe_url=i._getFacebookPageUrl(i.artist.content.facebook_page_url),h(function(){i.loading=!1}),f.putObject(i.artist.name,a.data)},function(a){i.artist.error.code=1,i.artist.error.type="danger",i.artist.error.message="<strong>Sorry</strong>, <em>"+i.artist.name+"</em> was not found. :(",h(function(){i.loading=!1})})},i.getNextEvents=function(){if(i.loading=!0,i.artist.events=[],!i.artist.name)return i.artist.error.code=1,i.artist.error.type="warning",i.artist.error.message="<strong>Please</strong>, set the artist name.",h(function(){i.loading=!1}),!1;var b=j.get(i.artist.name);return console.log(b),b?(i.artist.events=b,h(function(){i.loading=!1}),!1):void a.get(k+i.artist.name+"/events",l).then(function(a){console.log(a),h(function(){i.loading=!1}),a.data.length>0?(i.artist.events=a.data,j.put(i.artist.name,a.data)):(i.artist.error.code=1,i.artist.error.type="warning",i.artist.error.message="<strong>Sorry</strong>, no events were found for this artist. :(")},function(a){i.loading=!1,i.artist.error.code=1,i.artist.error.type="warning",i.artist.error.message="<strong>Sorry</strong>, no events were found for this artist. :("})},i._getFacebookPageUrl=function(a){return a?b.trustAsResourceUrl("https://www.facebook.com/plugins/like.php?href="+i.artist.content.facebook_page_url+"&width=300&layout=standard&action=like&size=small&show_faces=false&share=false&height=40&appId=433250860343994&colorscheme=dark"):void 0},i._lastArtists=function(){i.slickLoaded=!0,i.lastArtists=_.map(f.getObject("input"),function(a){return a}),h(function(){i.slickLoaded=!1})},i._getInputCache=function(a){var b=f.getObject("input");console.log(f.get("input")),_.isUndefined(b)?f.putObject("input",[a]):_.findWhere(b,{id:a.id})||(b.unshift(a),f.putObject("input",b))},i._removeSearch=function(a){i.slickLoaded=!0,f.putObject("input",_.reject(f.getObject("input"),{id:a})),f.remove(a),i._lastArtists(),h(function(){i.slickLoaded=!1})},i.removeAllCache=function(){_.map(f.getObject("input"),function(a){f.remove(a)}),f.remove("input"),i._lastArtists()},i.clearSearch(0)}]),angular.module("eventsApp").controller("AboutCtrl",["$scope",function(a){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var b=a.$parent.main;b.clearSearch(0)}]),angular.module("eventsApp").controller("ContactCtrl",["$scope",function(a){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var b=a.$parent.$parent.main;b.clearSearch(0)}]),angular.module("eventsApp").run(["$templateCache",function(a){a.put("views/about.html",'<h1>About</h1> <hr> <h4>PowerEvents Application</h4> <p> <strong>PowerEvents</strong> is an application to show you informations about your favorites artists. Our application is based on REST API concepts and we find the searchs getting the <strong><a href="https://app.swaggerhub.com/apis/Bandsintown/PublicAPI/3.0.0" target="_blank">Bandsintown</a></strong> REST API results. </p> <p> This application was made for the VanHackaton 4.0. This application was created using Yeoman with Angular-cli and the technologies bellow was used: </p> <br> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> <br> <br>'),a.put("views/contact.html",'<h1>Contact</h1> <hr> <h4>The contacts of this application creator</h4> <p> <strong>Hi there</strong>, I\'m <strong><a href="http://www.marciobera.com" target="_blank">Marcio Bera</a></strong>. </p> <p>I\'m a web developer professional passionate for web and news technologies that help to become life easier for web users.</p> <p>My passion for learning web technologies started in 2007. After graduating from University Center of Maring치 in 2011, I started a master degree in Science Computer at State University of Maring치, where I became an assistant professor.</p> <p>In the web development field, I work with some technologies frond-end (e.g. AngularJS, jQuery, Bootstrap) and back-end (e.g. PHP, using Laravel and Codeigniter framework). At the moment, I\'m learning some technologies like Ruby on Rails and ReactJS. </p> <br> <h4>Contacts</h4> <hr> <div class="row"> <div class="col-sm-12"> <div class="row"> <div class="col-md-3 col-xs-6"> <h5>Location</h5> <a href="https://www.google.com.br/maps?client=safari&rls=en&dcr=0&q=Maring치+-+PR,+Brasil&biw=1679&bih=943&um=1&ie=UTF-8&sa=X&ved=0ahUKEwipofbm_tnXAhXKGpAKHRV6CcIQ_AUICigB" target="_blank">Maring치 - PR, Brazil</a> </div> <div class="col-md-3 col-xs-6"> <h5>Phone</h5> <a href="https://api.whatsapp.com/send?phone=5544998645600" target="_blank">+55 44 99864 5600</a> </div> <div class="col-md-3 col-xs-6"> <h5>Email</h5> <a href="mailto:marciobera@hotmail.com">marciobera@hotmail.com</a> </div> <div class="col-md-3 col-xs-6"> <h5>Skype</h5> <a href="#">marciobera</a> </div> </div> </div> </div> <br> <br>'),a.put("views/main.html",'<img src="images/logo-big.d045baba.png" alt="Power Events!" class="img-responsive"> <br> <div class="jumbotron"> <p class="lead"> The easiest way to you follow your favorite artist. </p> <br> <div class="row"> <div class="col-md-10 col-md-offset-1"> <form ng-submit="main.getArtist()"> <div class="input-group main-search hidden-xs"> <input type="text" class="form-control input-lg text-center" ng-change="main.getArtist()" ng-model-options="{ debounce: 500 }" ng-model="main.artist.name" placeholder="Enter the name of your artist or band"> <span class="input-group-btn"> <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button> </span> </div> <div class="input-group main-search hidden-sm hidden-md hidden-lg"> <input type="text" class="form-control input-lg text-center" name="search" ng-model="main.artist.name" placeholder="Enter the name of your artist or band"> <span class="input-group-btn"> <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button> </span> </div> </form> </div> <div class="col-md-10 col-md-offset-1 text-right" ng-if="main.artist.name"> <a href="javascript:;" ng-click="main.clearSearch(1)" class="text-muted">clear search</a> </div> </div> </div> <div class="row marketing"> <div ng-if="main.artist.content.id"> <div class="col-sm-4"> <img ng-src="{{main.artist.content.image_url}}" class="img-responsive img-thumbnail hidden-sm hidden-md hidden-lg"> <img ng-src="{{main.artist.content.thumb_url}}" class="img-responsive img-thumbnail hidden-xs"> </div> <div class="col-sm-8"> <h1> {{main.artist.content.name}} </h1> <hr> <div class="row"> <div class="col-md-12" ng-if="main.artist.content.facebook_iframe_url"> <iframe ng-src="{{main.artist.content.facebook_iframe_url}}" width="*" height="40px" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowtransparency="true"></iframe> </div> <div class="col-md-12 text-center"> <a ng-if="main.artist.content.facebook_page_url" href="{{main.artist.content.facebook_page_url}}" class="btn btn-primary" target="_blank"><i class="fa fa-facebook"></i></a> <span class="hidden-xs">&nbsp; &nbsp;</span> <button class="btn btn-default" ng-click="main.getNextEvents()" target="_blank"><i class="fa fa-calendar"></i> Upcoming events</button> <span class="hidden-xs">&nbsp; &nbsp;</span> <br class="hidden-md hidden-lg"> <a href="{{main.artist.content.url}}" target="_blank">See in<img src="images/bandsintown-logo.709441da.svg" height="30px"></a> </div> </div> </div> </div> <div class="col-md-12"> <div ng-if="main.artist.events.length > 0"> <br> <h3 class="text-default text-center"><i class="fa fa-calendar"></i> upcoming {{main.artist.content.name}} events</h3> <br> <table class="table" ng-if="main.artist.events.length > 0"> <thead> <tr> <th class="hidden-xs hidden-sm">City</th> <th class="hidden-xs hidden-sm">Country</th> <th class="hidden-xs hidden-sm">Date</th> <th class="hidden-xs hidden-sm">Venue</th> <th class="hidden-md hidden-lg">Info</th> <th width="90">Tickets</th> <th></th> </tr> </thead> <tbody> <tr dir-paginate="event in main.artist.events | itemsPerPage: 10" pagination-id="cust"> <td class="hidden-xs hidden-sm">{{event.venue.city}}</td> <td class="hidden-xs hidden-sm">{{event.venue.country}}</td> <td class="hidden-xs hidden-sm">{{event.datetime | amCalendar}}</td> <td class="hidden-xs hidden-sm"><a href="https://www.google.com/maps/?q={{event.venue.latitude}},{{event.venue.longitude}}" target="_blank"><i class="fa fa-map-marker"></i></a> {{event.venue.name}} </td> <td class="hidden-md hidden-lg"> <strong>City:</strong> {{event.venue.city}}<br> <strong>Country:</strong> {{event.venue.country}}<br> <strong>Date:</strong> {{event.datetime | amCalendar}}<br> <strong>Venue:</strong> <a href="https://www.google.com/maps/?q={{event.venue.latitude}},{{event.venue.longitude}}" target="_blank"><i class="fa fa-map-marker"></i></a> {{event.venue.name}} </td> <td> <div ng-if="event.offers.length == 0"><small>Unavailable</small></div> <div ng-repeat="offer in event.offers"> <a href="{{offer.url}}" target="_blank" ng-if="offer.status == \'available\'"><i class="fa fa-ticket" aria-hidden="true"></i>&nbsp;{{offer.type}}</a> </div> </td> <td><a href="{{event.url}}" target="_blank"><i class="fa fa-info-circle"></i></a></td> </tr> </tbody> <tfoot> <tr> <td colspan="6" class="text-center"><dir-pagination-controls pagination-id="cust"></dir-pagination-controls></td> </tr> </tfoot> </table> </div> </div> </div> <div class="col-md-12" ng-if="main.artist.error.code"> <br> <div class="alert alert-{{main.artist.error.type}}" ng-bind-html="main.artist.error.message"></div> </div>  <div ng-if="main.loading" class="text-center"> <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> </div> <!-- <pre>{{main.lastArtists | json}}</pre> --> <div class="row marketing" ng-if="!main.artist.content.id"> <h4>What is this?</h4> <p> PowerEvents is a powerful application that show you details about your favorite artist. </p> <h4>And about the informations?</h4> <p> The informations founded are gettered of <strong><a href="https://app.swaggerhub.com/apis/Bandsintown/PublicAPI/3.0.0" target="_blank">Bandsintown</a></strong> REST API. </p> <h4>How much?</h4> <p>It\'s a free aplication. Enjoy it! =)</p> </div>')}]);